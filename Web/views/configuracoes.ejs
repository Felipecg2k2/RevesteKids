<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configurações</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="/css/configuracoes.css">
    

</head>
<body>
    
    <!-- O contêiner principal para o layout de Sidebar + Conteúdo -->
    <div class="app-layout" id="app-container">
        <!-- Supondo que o partial '_sidebar' usa a classe 'sidebar-menu' -->
        <%- include('partials/_sidebar') %> 

        <!-- A área de conteúdo principal, agora com ID para o layout de margem -->
        <main id="main-content-area"> 
            <section class="config-block personal-block">
                <div class="block-header"><i class="fas fa-user-cog"></i><h3>Pessoal</h3></div>
                <ul>
                    <%- include('partials/config_item', { icon: 'fa-user', title: 'Perfil', description: 'Editar informações pessoais', action_link: '/perfil/editar', action_label: 'Editar' }) %>
                    <%- include('partials/config_item', { icon: 'fa-share-alt', title: 'Compartilhamento', description: 'Gerenciar como suas informações são compartilhadas', action_link: '/configuracoes', action_label: 'Configurar' }) %>
                    <%- include('partials/config_item', { icon: 'fa-sync-alt', title: 'Trocas', description: 'Histórico e preferências de trocas', action_link: '/trocas', action_label: 'Ver' }) %>
                </ul>
            </section>
            
            <section class="config-block navigation-block">
                <div class="block-header"><i class="fas fa-route"></i><h3>Navegação</h3></div>
                <ul>
                    <%- include('partials/config_item', { icon: 'fa-comment-dots', title: 'Chat', description: 'Configurações de mensagens e notificações', action_link: '/configuracoes', action_label: 'Configurar' }) %>
                    <%- include('partials/config_item', { icon: 'fa-user-lock', title: 'Contas Bloqueadas', description: 'Gerenciar usuários bloqueados', action_link: '/configuracoes', action_label: 'Ver Lista' }) %>
                </ul>
            </section>

            <section class="config-block personalization-block">
                <div class="block-header"><i class="fas fa-palette"></i><h3>Personalização</h3></div>
                <ul>
                    <%- include('partials/config_item', { icon: 'fa-filter', title: 'Palavras Ocultas', description: 'Filtrar conteúdo com palavras específicas', action_link: '/configuracoes', action_label: 'Configurar' }) %>
                    <%- include('partials/config_item', { icon: 'fa-file-alt', title: 'Reporte', description: 'Reportar problemas ou usuários inadequados', action_link: '/configuracoes', action_label: 'Reportar' }) %>
                    <%- include('partials/config_item', { icon: 'fa-cogs', title: 'Gerenciamento', description: 'Configurações gerais da conta', action_link: '/configuracoes/', action_label: 'Acessar' }) %>
                </ul>
            </section>

            <section class="config-block danger-zone">
                <div class="block-header"><i class="fas fa-exclamation-triangle"></i><h3 class="danger-title">Zona de Perigo</h3></div>
                <ul>
                    <%- include('partials/config_item', { icon: 'fa-sign-out-alt', title: 'Sair da Conta', description: 'Desconectar do ReVeste Kids', action_link: '/logout', action_label: 'Sair', is_danger: true }) %>
                    <%- include('partials/config_item', { 
                        icon: 'fa-trash-alt', 
                        title: 'Excluir Conta', 
                        description: 'Remover permanentemente sua conta e dados', 
                        action_label: 'Excluir Conta', 
                        is_danger: true,
                        action_id: 'btn-excluir-conta'
                    }) %>
                </ul>
            </section>
            
            <form id="form-excluir-conta" method="POST" action="/perfil/apagar" style="display: none;">
            </form>
        </main>
    </div>

    <script>
        // Adicionar uma função de modal simples (ou manter o window.confirm temporariamente)
        
        document.addEventListener('DOMContentLoaded', () => {
            const btnExcluir = document.getElementById('btn-excluir-conta');
            const formExcluir = document.getElementById('form-excluir-conta');

            if (btnExcluir && formExcluir) {
                // ATENÇÃO: window.confirm() deve ser substituído por um modal/diálogo customizado.
                btnExcluir.addEventListener('click', (e) => {
                    e.preventDefault();

                    // USO TEMPORÁRIO DE CONFIRM: MUDAR PARA MODAL CUSTOMIZADO
                    const confirmacao = window.confirm(
                        "ATENÇÃO: Você tem certeza que deseja excluir permanentemente sua conta? Esta ação não pode ser desfeita."
                    );

                    if (confirmacao) {
                        formExcluir.submit();
                    }
                });
            }
        });
    </script>
</body>
</html>
